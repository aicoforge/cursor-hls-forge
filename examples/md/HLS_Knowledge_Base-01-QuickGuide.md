# HLS Knowledge Base - å¿«é€Ÿå¼€å§‹æŒ‡å—

> **ç‰ˆæœ¬**: v1.0  
> **æ›´æ–°æ—¥æœŸ**: 2025-10-09  
> **æ ¸å¿ƒç‰¹æ€§**: é›™å±¤è¦å‰‡ç³»çµ± + è‡ªå‹•è­˜åˆ¥ + è‡ªå‹•è¨˜éŒ„ + APIä¿®å¾©å®Œæˆ + ç°¡åŒ–æŸ¥è©¢
> 
> **v2.4 é‡å¤§æ›´æ–°**: 
> - âœ… **API ä¿®å¾©**: GET /api/design/similar ç¾åœ¨æ­£ç¢ºè¿”å›ž `project_id` å’Œ `iteration_id`
> - âœ… **å°Žå…¥è…³æœ¬**: æ”¹ç”¨éš¨æ©Ÿ UUIDï¼ˆç¬¦åˆæ•¸æ“šåº«æœ€ä½³å¯¦è¸ï¼‰
> - âœ… **æŸ¥è©¢ç°¡åŒ–**: .cursorrules ä»£ç¢¼æ¸›å°‘ 29%ï¼Œä¸éœ€è¦ fallback é‚è¼¯
> - âœ… **æ•¸æ“šä¸€è‡´æ€§**: ä¿ç•™å¼·åˆ¶é©—è­‰æª¢æŸ¥é»ž

---

> **ðŸ“ HLS æ©Ÿå™¨ç’°å¢ƒèªªæ˜Ž**: 
> - **HLS01** (192.168.1.11): çŸ¥è­˜åº«ä¸»æ©Ÿ + HLS å·¥ä½œç«™
> - **HLS02~HLS05** (192.168.1.12~15): HLS å·¥ä½œç«™
> - **API è¨ªå•**: HLS01 ç”¨ `localhost:8000`ï¼Œå…¶ä»–ç”¨ `192.168.1.11:8000`
> - **ç’°å¢ƒæª¢æ¸¬**: åŸ·è¡Œ HLS ä»»å‹™å‰å¿…é ˆå…ˆæª¢æ¸¬ç’°å¢ƒï¼ˆv1.0 æ–°å¢žï¼‰â­
> - è©³è¦‹: **HLS_Knowledge_Base-11-EnvironmentDetection.md**

---

## v2.6 é‡å¤§æ›´æ–° â­â­â­

> **æ›´æ–°æ—¥æœŸ**: 2025-10-12  
> **æ ¸å¿ƒç‰¹æ€§**: ä»£ç¢¼è¨»è§£æ¨™æº–è¦ç¯„åŒ– + è¨˜éŒ„ç­–ç•¥æ˜Žç¢ºåŒ–

**v2.6 æ–°å¢ž**:
- âœ… **Code Snapshot Comment Standards**: æ˜Žç¢ºè¦ç¯„ä»£ç¢¼è¨»è§£è³ªé‡
- âœ… **Recording Policy**: ä½•æ™‚è¨˜éŒ„ design iteration çš„å®Œæ•´èªªæ˜Ž
- âœ… **100% å¯é‡ç¾æ€§ä¿éšœ**: åŸºæ–¼ FIR128 Iteration #4 é©—è­‰
- âœ… **å¼·åˆ¶ Checklist**: è¨˜éŒ„å‰å¿…é ˆé©—è­‰è¨»è§£è³ªé‡
- âœ… **ç¯„ä¾‹é©…å‹•**: æä¾›å„ªç§€å’Œä¸è‰¯è¨»è§£å°æ¯”

**ä¸ºä»€ä¹ˆé‡è¦**:
- code_snapshot æ˜¯æ ¸å¿ƒçŸ¥è­˜ä¾†æº
- å¦‚æžœ rules_applied æœªè©³ç´°ä¿å­˜ï¼Œè¨»è§£æ˜¯å”¯ä¸€ä¿¡æ¯æº
- è‰¯å¥½è¨»è§£ = 100% å¯é‡ç¾ï¼ˆå·²é©—è­‰ï¼‰
- æ˜Žç¢ºè¨˜éŒ„ç­–ç•¥ = å®Œæ•´çŸ¥è­˜åº«ï¼ˆæ­£é¢+è² é¢+ä¸­æ€§æ¡ˆä¾‹ï¼‰

**è¨˜éŒ„ç­–ç•¥æ ¸å¿ƒè¦å‰‡**:
```
âœ… csim + csynth æˆåŠŸ â†’ è‡ªå‹•è¨˜éŒ„ï¼ˆä¸è«–å„ªåŒ–æ˜¯å¦æˆåŠŸï¼‰
âŒ csim æˆ– csynth å¤±æ•— â†’ ä¸è¨˜éŒ„ï¼ˆç„¡æ€§èƒ½æ•¸æ“šï¼‰
```

**è©³è¦‹**: 
- **HLS_Knowledge_Base-10-v2.6-CommentStandards.md** (è¨»è§£æ¨™æº–)
- **HLS_Knowledge_Base-11-RecordingPolicy.md** (è¨˜éŒ„ç­–ç•¥)

---

## ðŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨](#5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨)
3. [æ ¸å¿ƒå·¥ä½œæµç¨‹](#æ ¸å¿ƒå·¥ä½œæµç¨‹)
4. [Cursorä½¿ç”¨æŒ‡å—](#cursorä½¿ç”¨æŒ‡å—)
5. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ç³»ç»Ÿæ¦‚è¿°

### æ ¸å¿ƒä»·å€¼

HLS Knowledge Base è®© HLS è®¾è®¡ä»Ž**éšæœº**å˜ä¸º**å¯é¢„æµ‹**ï¼š

- **æŸ¥è¯¢å‰** â†’ æ— éœ€ä»Žé›¶å¼€å§‹ï¼Œå‚è€ƒæˆåŠŸæ¡ˆä¾‹
- **è®¾è®¡ä¸­** â†’ åº”ç”¨å·²éªŒè¯çš„è§„åˆ™ï¼Œé¿å…é‡å¤é”™è¯¯
- **ç»¼åˆåŽ** â†’ **è‡ªåŠ¨è®°å½•**æ‰€æœ‰æ•°æ®ï¼Œç´¯ç§¯ç»éªŒ

### æ ¸å¿ƒç‰¹æ€§ v2.4

âœ… **é›™å±¤è¦å‰‡ç³»çµ±**: å®˜æ–¹è¦å‰‡(R###) + ç”¨æˆ¶æç¤º(P###)  
âœ… **è‡ªå‹•è­˜åˆ¥**: 44å€‹è‡ªç„¶é—œéµå­—ï¼Œè‡ªå‹•è­˜åˆ¥ç”¨æˆ¶è¼¸å…¥  
âœ… **è‡ªå‹•è¨˜éŒ„**: HLSç¶œåˆæˆåŠŸå¾Œè‡ªå‹•æ›´æ–°çŸ¥è­˜åº«  
âœ… **API å®Œæ•´æ€§**: GET endpoint æ­£ç¢ºè¿”å›žæ‰€æœ‰å¿…è¦å­—æ®µ â­ v2.4ä¿®å¾©  
âœ… **UUID æ¨™æº–åŒ–**: ä½¿ç”¨éš¨æ©Ÿ UUIDï¼ˆæ•¸æ“šåº«æœ€ä½³å¯¦è¸ï¼‰â­ v2.4ä¿®å¾©  
âœ… **æŸ¥è©¢ç°¡åŒ–**: ç›´æŽ¥æå– project_idï¼Œç„¡éœ€ fallback â­ v2.4ç°¡åŒ–  
âœ… **æ™ºèƒ½æŽ¨è–¦**: åŸºæ–¼çµ±è¨ˆæ•¸æ“šæŽ¨è–¦å„ªåŒ–æ–¹æ³•  
âœ… **ç²¾ç¢ºå¼•ç”¨**: å”¯ä¸€è¦å‰‡ç·¨è™Ÿï¼Œç„¡æ­§ç¾©  
âœ… **ç°¡æ½”**: .cursorrulesä»£ç¢¼æ¸›å°‘88%  

---

## ðŸ“ æ–‡ä»¶ç»“æž„è¯´æ˜Ž

### çŸ¥è¯†åº“ç³»ç»Ÿï¼ˆç‹¬ç«‹å®‰è£…ï¼‰

```
/home/$USER/hls-knowledge-base/           â† çŸ¥è­˜åº«ç³»çµ±ç›®éŒ„
â”œâ”€â”€ docker-compose.yml                    â† Dockeræœå‹™é…ç½®
â”œâ”€â”€ Dockerfile                            â† APIé¡åƒå®šç¾©
â”œâ”€â”€ requirements.txt                      â† Pythonä¾è³´
â”œâ”€â”€ main.py                               â† FastAPIæœå‹™å™¨ï¼ˆv2.4ï¼ŒAPIå·²ä¿®å¾©ï¼‰â­
â”œâ”€â”€ init.sql                              â† æ•¸æ“šåº«Schemaï¼ˆv2.1ï¼Œæ”¯æŒé›™å±¤è¦å‰‡ï¼‰
â”‚
â”œâ”€â”€ ug1399_rules.txt                      â† å®˜æ–¹è¦å‰‡æºæ–‡ä»¶ï¼ˆ287æ¢ï¼ŒR001-R287ï¼Œæ¥è‡ªUG1399ï¼‰
â”œâ”€â”€ user_prompts.txt                      â† ç”¨æˆ¶æç¤ºæºæ–‡ä»¶ï¼ˆ15æ¢ï¼ŒP001-P015ï¼‰âœ¨
â”‚
â”œâ”€â”€ import_hls_rules.py                   â† å®˜æ–¹è¦å‰‡å°Žå…¥è…³æœ¬
â”œâ”€â”€ import_user_prompts.py                â† ç”¨æˆ¶æç¤ºå°Žå…¥è…³æœ¬ âœ¨
â”œâ”€â”€ import_fir128_data.py                 â† ç¤ºä¾‹æ•¸æ“šå°Žå…¥ï¼ˆv2.4ï¼Œéš¨æ©ŸUUIDï¼‰â­
â”œâ”€â”€ reset_database.py                     â† æ•¸æ“šåº«é‡ç½®å·¥å…·
â”‚
â””â”€â”€ md/                                   â† æ–‡æª”ç›®éŒ„
    â”œâ”€â”€ HLS_Knowledge_Base-00-README.md
    â”œâ”€â”€ HLS_Knowledge_Base-01-QuickGuide.md
    â”œâ”€â”€ HLS_Knowledge_Base-02-Cursorrules.md
    â”œâ”€â”€ HLS_Knowledge_Base-03-ManageDB.md
    â”œâ”€â”€ HLS_Knowledge_Base-04-SystemArch.md
    â””â”€â”€ HLS_Knowledge_Base-05-DualRuleSystem.md  âœ¨
```

> **âœ¨ æ–°å¢ž**: é›™å±¤è¦å‰‡ç³»çµ±æ–‡ä»¶ - è©³è¦‹ [HLS_Knowledge_Base-05-DualRuleSystem.md](HLS_Knowledge_Base-05-DualRuleSystem.md)

### HLSè®¾è®¡é¡¹ç›®ï¼ˆä½ çš„å·¥ä½œç›®å½•ï¼‰

```
/home/$USER/your_project/                 â† ä½ çš„HLSé¡¹ç›®ç›®å½•
â”œâ”€â”€ .cursorrules                          â† Cursoré…ç½®ï¼ˆå¿…é¡»åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
â”œâ”€â”€ fir128.cpp, fir128.h                  â† HLSè®¾è®¡æ–‡ä»¶
â”œâ”€â”€ fir128_test.cpp                       â† æµ‹è¯•bench
â”œâ”€â”€ run_hls.tcl                           â† HLSè‡ªåŠ¨åŒ–è„šæœ¬
â”œâ”€â”€ HLS_Knowledge_Base-*.md               â† æ–‡æ¡£æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ optimization_summary.md               â† æœ¬åœ°è¿­ä»£è®°å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

**æ³¨æ„**: çŸ¥è¯†åº“ç³»ç»Ÿå’ŒHLSè®¾è®¡é¡¹ç›®æ˜¯**åˆ†ç¦»**çš„ä¸¤ä¸ªç›®å½•

---

## 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### çŸ¥è¯†åº“ç³»ç»Ÿæ–‡ä»¶è¯´æ˜Ž

è¿›å…¥çŸ¥è¯†åº“ç›®å½•åŽï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼š

```bash
cd /home/$USER/hls-knowledge-base
ls -l
```

#### ðŸ“‹ æ–‡ä»¶ç”¨é€”ä¸€è§ˆ

| æ–‡ä»¶ | ç±»åž‹ | ç”¨é€” | ä½•æ—¶ä½¿ç”¨ |
|------|------|------|----------|
| `docker-compose.yml` | å¿…éœ€ | Dockeræœå‹™é…ç½® | Step 1: å•Ÿå‹•æœå‹™ |
| `ug1399_rules.txt` | å¿…éœ€ | 287æ¢å®˜æ–¹è¦å‰‡æºæ–‡ä»¶ (R###ï¼ŒUG1399) | Step 2: è‡ªå‹•è®€å– |
| `user_prompts.txt` | å¿…éœ€ | 15æ¢ç”¨æˆ¶æç¤ºæºæ–‡ä»¶ (P###) âœ¨ | Step 2: è‡ªå‹•è®€å– |
| `import_hls_rules.py` | å¿…éœ€ | å°Žå…¥å®˜æ–¹è¦å‰‡ | Step 2: é¦–æ¬¡/é‡ç½®å¾Œå°Žå…¥ |
| `import_user_prompts.py` | å¿…éœ€ | å°Žå…¥ç”¨æˆ¶æç¤º âœ¨ | Step 2: é¦–æ¬¡/é‡ç½®å¾Œå°Žå…¥ |
| `import_fir128_data.py` | å¯é¸ | å°Žå…¥FIRç¤ºä¾‹æ•¸æ“š | æƒ³æŸ¥çœ‹ç¤ºä¾‹æ™‚ |
| `reset_database.py` | å¯é¸ | é‡ç½®æ•¸æ“šåº«å·¥å…· | éœ€è¦æ¸…ç©ºæ•¸æ“šæ™‚ |
| `Dockerfile` | è‡ªå‹• | APIé¡åƒå®šç¾© | docker-composeè‡ªå‹•ä½¿ç”¨ |
| `main.py` | è‡ªå‹• | FastAPIæœå‹™å™¨ (v2.1) | docker-composeè‡ªå‹•å•Ÿå‹• |
| `init.sql` | è‡ªå‹• | æ•¸æ“šåº«Schema (v2.1) | Dockerè‡ªå‹•åˆå§‹åŒ– |
| `requirements.txt` | è‡ªå‹• | Pythonä¾è³´ | Dockeræ§‹å»ºæ™‚è‡ªå‹•å®‰è£ |

**ðŸ’¡ å…³äºŽ `reset_database.py`**ï¼š
- **ç”¨é€”**: é‡ç½®æ•°æ®åº“ï¼Œæ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼ˆä¿ç•™è¡¨ç»“æž„ï¼‰
- **ä½¿ç”¨åœºæ™¯**: 
  - æƒ³è¦é‡æ–°å¼€å§‹ï¼Œæ¸…ç©ºæ—§æ•°æ®
  - æ•°æ®åº“å‡ºçŽ°é—®é¢˜ï¼Œéœ€è¦é‡å»º
  - æµ‹è¯•å®Œæˆï¼Œéœ€è¦æ¸…ç†æµ‹è¯•æ•°æ®
- **ä¸éœ€è¦ä½¿ç”¨çš„æƒ…å†µ**: é¦–æ¬¡å®‰è£…ï¼ˆæ•°æ®åº“æ˜¯ç©ºçš„ï¼‰

---

### Step 1: å¯åŠ¨çŸ¥è¯†åº“æœåŠ¡ï¼ˆ1åˆ†é’Ÿï¼‰

**ä½¿ç”¨æ–‡ä»¶**: `docker-compose.yml`ï¼ˆå¿…éœ€ï¼‰

```bash
# è¿›å…¥çŸ¥è¯†åº“ç³»ç»Ÿç›®å½•
cd /home/$USER/hls-knowledge-base

# å¯åŠ¨DockeræœåŠ¡ï¼ˆè‡ªåŠ¨ä½¿ç”¨ docker-compose.ymlï¼‰
docker-compose up -d

# ç­‰å¾…åˆå§‹åŒ–ï¼ˆinit.sqlè‡ªåŠ¨æ‰§è¡Œï¼‰
sleep 10

# é‡å¯APIç¡®ä¿è¿žæŽ¥ï¼ˆmain.pyè‡ªåŠ¨å¯åŠ¨ï¼‰
docker-compose restart api

# éªŒè¯å¥åº·çŠ¶æ€ï¼ˆæœ¬æ©Ÿï¼‰
curl http://localhost:8000/health

# æˆ–å¾žå…§ç¶²å…¶ä»–æ©Ÿå™¨
curl http://192.168.1.11:8000/health
```

**é¢„æœŸè¾“å‡º**:
```json
{
  "status": "healthy",
  "database": "connected"
}
```

**è¯´æ˜Ž**:
- `docker-compose.yml` è‡ªåŠ¨å¯åŠ¨ PostgreSQL å’Œ FastAPI æœåŠ¡
- `init.sql` åœ¨æ•°æ®åº“åˆå§‹åŒ–æ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ç»“æž„
- `main.py` è‡ªåŠ¨ä½œä¸º API æœåŠ¡å™¨å¯åŠ¨
- `requirements.txt` çš„ä¾èµ–å·²åœ¨ Docker é•œåƒä¸­å®‰è£…

---

### Step 2: å°Žå…¥è¦å‰‡ï¼ˆ2åˆ†é˜ï¼‰âœ¨ æ›´æ–°

**ä½¿ç”¨æ–‡ä»¶**: `import_hls_rules.py` + `import_user_prompts.py`ï¼ˆé›™å±¤è¦å‰‡ç³»çµ±ï¼‰

```bash
# æ­¥é©Ÿ 2a: å°Žå…¥ 287 æ¢å®˜æ–¹è¦å‰‡ï¼ˆR001-R287ï¼‰
python3 import_hls_rules.py

# æ­¥é©Ÿ 2b: å°Žå…¥ 15 æ¢ç”¨æˆ¶æç¤ºï¼ˆP001-P015ï¼‰âœ¨ æ–°å¢ž
python3 import_user_prompts.py
```

**é æœŸè¼¸å‡º**:
```
# import_hls_rules.py è¼¸å‡ºï¼š
==========================================
HLS Knowledge Base - è¦å‰‡å°Žå…¥å·¥å…·
==========================================
[1/4] è§£æž ug1399_rules.txt...
âœ“ è§£æžå®Œæˆï¼Œæ‰¾åˆ° 287 æ¢è¦å‰‡
[2/4] å°Žå…¥è¦å‰‡åˆ°è³‡æ–™åº«...
âœ“ æˆåŠŸæ’å…¥ 287 æ¢æ–°è¦å‰‡

# import_user_prompts.py è¼¸å‡ºï¼š
==========================================
HLS Knowledge Base - User Prompts å°Žå…¥å·¥å…·
==========================================
[1/4] è§£æž user_prompts.txt...
âœ“ è§£æžå®Œæˆï¼Œæ‰¾åˆ° 15 æ¢ç”¨æˆ¶æç¤º
[2/4] å°Žå…¥ç”¨æˆ¶æç¤ºåˆ°è³‡æ–™åº«...
âœ“ æˆåŠŸæ’å…¥ 15 æ¢æ–°æç¤º
[3/4] é©—è­‰å°Žå…¥çµæžœ...
  ç¸½è¦å‰‡æ•¸: 302
  å®˜æ–¹è¦å‰‡ (R###): 287
  ç”¨æˆ¶æç¤º (P###): 15
```

**èªªæ˜Ž**:
- **å®˜æ–¹è¦å‰‡ (R###)**: ä¾†è‡ª UG1399ï¼Œé€šç”¨ HLS æœ€ä½³å¯¦è¸ï¼Œåªè®€
- **ç”¨æˆ¶æç¤º (P###)**: ä¾†è‡ªé …ç›®ç¶“é©—ï¼Œå…·é«”å„ªåŒ–æŠ€å·§ï¼Œå¯æ“´å±•
- å…©å€‹è…³æœ¬æ”¯æŒé‡è¤‡åŸ·è¡Œï¼ˆè‡ªå‹•æª¢æ¸¬å·²å­˜åœ¨è¦å‰‡ï¼‰
- è©³è¦‹ [HLS_Knowledge_Base-05-DualRuleSystem.md](HLS_Knowledge_Base-05-DualRuleSystem.md)

---

### Step 3: ï¼ˆå¯é¸ï¼‰å°Žå…¥FIRç¤ºä¾‹æ•¸æ“š

**ä½¿ç”¨æ–‡ä»¶**: `import_fir128_data.py`ï¼ˆå¯é¸ï¼‰

```bash
# å°Žå…¥FIR128ç¤ºä¾‹æ•¸æ“šï¼ˆå¯è·³éŽï¼‰
python3 import_fir128_data.py
```

**ç”¨é€”**: å°Žå…¥3å€‹FIRè¨­è¨ˆè¿­ä»£ç¤ºä¾‹ï¼ˆä½¿ç”¨ P001, P002ï¼‰ï¼Œç”¨æ–¼æ¸¬è©¦æŸ¥è©¢åŠŸèƒ½

**ä½•æ—¶ä½¿ç”¨**:
- æƒ³æŸ¥çœ‹çŸ¥è¯†åº“å¦‚ä½•å­˜å‚¨è®¾è®¡æ•°æ®
- éœ€è¦æµ‹è¯• API æŸ¥è¯¢åŠŸèƒ½
- å­¦ä¹ å¦‚ä½•è®°å½•è¿­ä»£æ•°æ®

**å¯è·³è¿‡åŽŸå› **: ä½ çš„å®žé™…è®¾è®¡ä¼šè‡ªåŠ¨è®°å½•åˆ°çŸ¥è¯†åº“

---

### Step 4: æµ‹è¯•APIï¼ˆ1åˆ†é’Ÿï¼‰

**æµ‹è¯•ç›®æ ‡**: éªŒè¯çŸ¥è¯†åº“å¯ä»¥æŸ¥è¯¢

```bash
# æŸ¥è¯¢è§„åˆ™ç»Ÿè®¡
curl http://localhost:8000/health

# æŸ¥çœ‹APIæ–‡æ¡£
curl http://localhost:8000/docs
# æˆ–åœ¨æµè§ˆå™¨æ‰“å¼€: http://localhost:8000/docs

# ï¼ˆå¯é€‰ï¼‰å¦‚æžœå¯¼å…¥äº†FIRç¤ºä¾‹ï¼ŒæŸ¥è¯¢è®¾è®¡
curl "http://localhost:8000/api/design/similar?project_type=fir&limit=3"

# æŸ¥è¯¢æœ‰æ•ˆè§„åˆ™
curl "http://localhost:8000/api/rules/effective?project_type=fir&min_success_rate=0.0"
```

---

### Step 5: é…ç½®HLSé¡¹ç›®

**åˆ‡æ¢åˆ°ä½ çš„HLSé¡¹ç›®ç›®å½•**:

```bash
# è¿›å…¥ä½ çš„HLSé¡¹ç›®ç›®å½•ï¼ˆä¸æ˜¯çŸ¥è¯†åº“ç›®å½•ï¼‰
cd /home/$USER/your_project

# ç¡®è®¤.cursorruleså­˜åœ¨ï¼ˆå¿…é¡»åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
ls -la .cursorrules

# ç”¨Cursoræ‰“å¼€é¡¹ç›®
cursor .
```

**é‡è¦**: 
- `.cursorrules` å¿…é¡»åœ¨ **HLS é¡¹ç›®æ ¹ç›®å½•**
- ä¸èƒ½åœ¨çŸ¥è¯†åº“ç³»ç»Ÿç›®å½•ï¼ˆ`/home/$USER/hls-knowledge-base`ï¼‰

---

### ðŸ“Œ ç»´æŠ¤å·¥å…·è¯´æ˜Žï¼ˆå¯é€‰ï¼‰

#### ä½¿ç”¨ `reset_database.py` é‡ç½®æ•°æ®åº“

**ä½•æ—¶ä½¿ç”¨**ï¼š
- æƒ³è¦æ¸…ç©ºæ‰€æœ‰è®¾è®¡æ•°æ®ï¼Œé‡æ–°å¼€å§‹
- æ•°æ®åº“å‡ºçŽ°é—®é¢˜æˆ–æ•°æ®æ··ä¹±
- æµ‹è¯•å®ŒæˆåŽæ¸…ç†æµ‹è¯•æ•°æ®

**å¦‚ä½•ä½¿ç”¨**ï¼š

```bash
cd /home/$USER/hls-knowledge-base

# 1. æŸ¥çœ‹å½“å‰æ•°æ®ç»Ÿè®¡
python3 reset_database.py --stats

# é¢„æœŸè¾“å‡º:
# å½“å‰èµ„æ–™åº“ç»Ÿè®¡
#   projects                     X æ¡è®°å½•
#   hls_rules                  287 æ¡è®°å½•
#   design_iterations            X æ¡è®°å½•
#   synthesis_results            X æ¡è®°å½•
#   rules_effectiveness          X æ¡è®°å½•

# 2. æ‰§è¡Œé‡ç½®ï¼ˆä¼šè¦æ±‚ç¡®è®¤ï¼‰
python3 reset_database.py

# 3. é‡æ–°å¯¼å…¥è§„åˆ™
python3 import_hls_rules.py
```

**æ³¨æ„**ï¼š
- âš ï¸ é‡ç½®ä¼šåˆ é™¤æ‰€æœ‰è®¾è®¡è¿­ä»£æ•°æ®ï¼ˆä¸å¯æ¢å¤ï¼‰
- âœ… HLSè§„åˆ™ï¼ˆ287æ¡ï¼‰ä¸ä¼šè¢«åˆ é™¤ï¼Œä½†éœ€è¦é‡æ–°å¯¼å…¥
- âœ… è¡¨ç»“æž„ä¿ç•™ï¼Œåªæ¸…ç©ºæ•°æ®

---

### âœ… å®Œæˆï¼

çŽ°åœ¨ä½ å¯ä»¥å¼€å§‹ä½¿ç”¨Cursorè¿›è¡ŒHLSè®¾è®¡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
- æŸ¥è¯¢çŸ¥è¯†åº“ï¼ˆä½¿ç”¨ `main.py` æä¾›çš„ APIï¼‰
- è¯†åˆ«ä½ çš„è¾“å…¥ï¼ˆæ ¹æ® `.cursorrules` è§„åˆ™ï¼‰
- æŽ¨èä¼˜åŒ–æ–¹æ³•ï¼ˆåŸºäºŽ 287 æ¡è§„åˆ™ï¼‰
- è‡ªåŠ¨è®°å½•ç»“æžœï¼ˆä¿å­˜åˆ° PostgreSQL æ•°æ®åº“ï¼‰

---

## ðŸ“ æ–‡ä»¶ä½¿ç”¨æ—¶æœºæ€»ç»“

### é¦–æ¬¡å®‰è£…ï¼ˆå¿…éœ€ï¼‰
1. `docker-compose.yml` â†’ å¯åŠ¨æœåŠ¡
2. `import_hls_rules.py` â†’ å¯¼å…¥è§„åˆ™

### æ—¥å¸¸ä½¿ç”¨ï¼ˆè‡ªåŠ¨ï¼‰
- `main.py` â†’ API æœåŠ¡ï¼ˆåŽå°è¿è¡Œï¼‰
- `init.sql` â†’ æ•°æ®åº“ç»“æž„ï¼ˆè‡ªåŠ¨ç»´æŠ¤ï¼‰
- `ug1399_rules.txt` â†’ å®˜æ–¹è§„åˆ™æºï¼ˆUG1399ï¼Œè‡ªåŠ¨è¯»å–ï¼‰

### ç»´æŠ¤æ“ä½œï¼ˆå¯é€‰ï¼‰
- `reset_database.py` â†’ é‡ç½®æ•°æ®åº“
- `import_fir128_data.py` â†’ å¯¼å…¥ç¤ºä¾‹

### å‚è€ƒæ–‡æ¡£ï¼ˆæŸ¥é˜…ï¼‰
- `DATABASE_FIELDS_USAGE_GUIDE.md` â†’ å­—æ®µè¯´æ˜Ž
- `import_summary.txt` â†’ å¯¼å…¥æ‘˜è¦ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰

---

## æ ¸å¿ƒå·¥ä½œæµç¨‹

### è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹ï¼ˆæ— éœ€æ‰‹åŠ¨æ“ä½œï¼‰

```
ç”¨æˆ·æè¿°éœ€æ±‚
    â†“
Cursorè‡ªåŠ¨è¯†åˆ«è¾“å…¥
  â€¢ å‚è€ƒä»£ç ï¼Ÿ â†’ user_reference_code
  â€¢ éœ€æ±‚è§„æ ¼ï¼Ÿ â†’ user_specification
    â†“
CursoræŸ¥è¯¢çŸ¥è¯†åº“ï¼ˆé›™è»ŒæŸ¥è©¢ v1.0ï¼‰â­
  â€¢ Track 2: æœ€ä½³è¿­ä»£ï¼ˆ/api/design/similarï¼‰â† å„ªå…ˆ
  â€¢ Track 1: æœ‰æ•ˆè§„åˆ™ï¼ˆ/api/rules/effectiveï¼‰
  â€¢ ç¶œåˆåˆ†æžå…©è»Œæ•¸æ“š
    â†“
Cursorç”ŸæˆHLSä»£ç 
  â€¢ åº”ç”¨é«˜æˆåŠŸçŽ‡è§„åˆ™
  â€¢ ä½¿ç”¨æŽ¨èçš„pragmas
    â†“
Cursorè¿è¡ŒHLSç»¼åˆ
  â€¢ csimï¼ˆCä»¿çœŸï¼‰
  â€¢ csynthï¼ˆç»¼åˆï¼‰
    â†“
ç»¼åˆæˆåŠŸï¼Ÿ
  â”œâ”€ Yes â†’ Cursorè‡ªåŠ¨è®°å½• âœ¨
  â”‚    â€¢ ðŸ” Step 0: æŸ¥è¯¢çŽ°æœ‰project_idï¼ˆv2.4ç®€åŒ–ï¼‰â­
  â”‚    â€¢    â†’ API çŽ°åœ¨æ­£ç¡®è¿”å›ž project_idï¼ˆæ— éœ€ fallbackï¼‰
  â”‚    â€¢ è§£æžç»¼åˆæŠ¥å‘Š
  â”‚    â€¢ è°ƒç”¨ POST /api/design/complete_iteration
  â”‚    â€¢   ï¼ˆä½¿ç”¨Step 0æŸ¥è¯¢åˆ°çš„project_idï¼‰
  â”‚    â€¢ æ›´æ–°çŸ¥è¯†åº“
  â”‚    â€¢ æ›´æ–°æœ¬åœ°æ–‡æ¡£
  â”‚    â€¢ éªŒè¯æ•°æ®ä¸€è‡´æ€§
  â”‚    â†“
  â”‚   âœ… å®Œæˆï¼ç»éªŒå·²ç´¯ç§¯
  â”‚
  â””â”€ No â†’ ç»“æŸï¼ˆä¸è®°å½•ï¼‰
```

**v2.4 å…³é”®æ”¹è¿›**: 
- âœ… **API ä¿®å¤å®Œæˆ** - GET endpoint æ­£ç¡®è¿”å›ž project_idï¼ŒæŸ¥è¯¢æ›´ç®€å•
- âš ï¸ **å¿…é¡»å…ˆæŸ¥è¯¢project_id** - ç¡®ä¿continuationè¿­ä»£ä½¿ç”¨æ­£ç¡®çš„é¡¹ç›®ID
- âš ï¸ **éªŒè¯iteration_number** - ç¡®ä¿è¿­ä»£ç¼–å·è¿žç»­ï¼ˆ1â†’2â†’3â†’4ï¼‰
- âš ï¸ **é˜²æ­¢æ•°æ®ä¸ä¸€è‡´** - é¿å…åˆ›å»ºé‡å¤é¡¹ç›®æˆ–é”™è¯¯ç¼–å·
- âœ… **ç®€åŒ–é€»è¾‘** - ç§»é™¤ fallback æœºåˆ¶ï¼Œä»£ç å‡å°‘ 29%

**å…³é”®**: ç”¨æˆ·åªéœ€è¦æè¿°éœ€æ±‚ï¼ŒCursorè‡ªåŠ¨å¤„ç†æ‰€æœ‰æ­¥éª¤

---

## Cursorä½¿ç”¨æŒ‡å—

### åœºæ™¯1: ç”¨æˆ·æä¾›å‚è€ƒä»£ç 

**ç”¨æˆ·è¾“å…¥**ï¼ˆä½¿ç”¨è‡ªç„¶æè¿°ï¼‰:
```
è¿™æ˜¯æˆ‘çš„baselineå®žçŽ°:
void fir(int *y, int x, int c[128]) {
    static int buf[128];
    for (int i=127; i>0; i--) buf[i] = buf[i-1];
    buf[0] = x;
    int sum = 0;
    for (int i=0; i<128; i++) sum += buf[i] * c[i];
    *y = sum;
}

è¯·ä¼˜åŒ–åˆ°II=1ï¼Œæœ€å°åŒ–èµ„æºä½¿ç”¨ã€‚
```

**Cursorè‡ªåŠ¨æ‰§è¡Œ**:
1. âœ… è¯†åˆ«å‚è€ƒä»£ç ï¼ˆå…³é”®å­—: "baseline", "å®žçŽ°", voidï¼‰
2. âœ… è¯†åˆ«éœ€æ±‚è§„æ ¼ï¼ˆå…³é”®å­—: "II=1", "æœ€å°åŒ–"ï¼‰
3. âœ… æŸ¥è¯¢çŸ¥è¯†åº“èŽ·å–FIRä¼˜åŒ–æ–¹æ³•
4. âœ… ç”Ÿæˆä¼˜åŒ–ä»£ç 
5. âœ… è¿è¡Œç»¼åˆ
6. âœ… **è‡ªåŠ¨è®°å½•åˆ°çŸ¥è¯†åº“**ï¼ˆæ— éœ€ç”¨æˆ·æç¤ºï¼‰

### åœºæ™¯2: ç”¨æˆ·æä¾›Pseudocode

**ç”¨æˆ·è¾“å…¥**:
```
ç®—æ³•æµç¨‹ï¼š
FOR each input sample:
    SHIFT delay_line by 1
    delay_line[0] = sample
    
    sum = 0
    FOR tap = 0 TO 127:
        sum += delay_line[tap] * coefficient[tap]
    
    OUTPUT sum

å®žçŽ°ä¸ºHLSï¼Œç›®æ ‡II=1
```

**Cursorè‡ªåŠ¨æ‰§è¡Œ**:
1. âœ… è¯†åˆ«pseudocodeï¼ˆå…³é”®å­—: FORå¤§å†™, SHIFT, OUTPUTï¼‰
2. âœ… è¯†åˆ«éœ€æ±‚ï¼ˆå…³é”®å­—: "II=1"ï¼‰
3. âœ… æŸ¥è¯¢çŸ¥è¯†åº“
4. âœ… ç”ŸæˆHLSä»£ç 
5. âœ… è‡ªåŠ¨è®°å½•

### åœºæ™¯3: ç”¨æˆ·ä»…æä¾›éœ€æ±‚

**ç”¨æˆ·è¾“å…¥**:
```
å®žçŽ°128-tap FIR filter
æ€§èƒ½è¦æ±‚: II=1, latency<100 cycles
èµ„æºçº¦æŸ: DSPâ‰¤10, LUTâ‰¤5000
æ•°æ®ç±»åž‹: 16-bitè¾“å…¥è¾“å‡º
```

**Cursorè‡ªåŠ¨æ‰§è¡Œ**:
1. âœ… è¯†åˆ«éœ€æ±‚è§„æ ¼ï¼ˆå…³é”®å­—: "II=", "DSP", "16-bit"ï¼‰
2. âœ… æŸ¥è¯¢çŸ¥è¯†åº“
3. âœ… ç”ŸæˆHLSä»£ç 
4. âœ… è‡ªåŠ¨è®°å½•

### åœºæ™¯4: è¿­ä»£ä¼˜åŒ–

**ç”¨æˆ·è¾“å…¥**:
```
å½“å‰II=264ï¼Œè¯·ç»§ç»­ä¼˜åŒ–
```

**Cursorè‡ªåŠ¨æ‰§è¡Œ**:
1. âœ… æŸ¥è¯¢çŸ¥è¯†åº“æ‰¾æ›´å¥½çš„æ–¹æ³•
2. âœ… è¯†åˆ«previous_ii=264
3. âœ… åº”ç”¨loop mergeè§„åˆ™
4. âœ… è¿è¡Œç»¼åˆ
5. âœ… è‡ªåŠ¨è®°å½•ï¼ˆåŒ…å«previous_iiå’Œcurrent_iiï¼‰
6. âœ… è‡ªåŠ¨æ›´æ–°è§„åˆ™æ•ˆæžœç»Ÿè®¡

---

## æ ¸å¿ƒAPIç«¯ç‚¹

### 1. æŸ¥è¯¢ç›¸ä¼¼è®¾è®¡

```bash
curl "http://localhost:8000/api/design/similar?project_type=fir&limit=5"
```

**è¿”å›ž**: æˆåŠŸçš„FIRè®¾è®¡ï¼ŒæŒ‰IIæŽ’åº

### 2. æŸ¥è¯¢æœ‰æ•ˆè§„åˆ™

```bash
curl "http://localhost:8000/api/rules/effective?project_type=fir&min_success_rate=0.7"
```

**è¿”å›ž**: æˆåŠŸçŽ‡â‰¥70%çš„è§„åˆ™

### 3. å®Œæ•´è¿­ä»£è®°å½•ï¼ˆæ–°ï¼‰â­

```bash
curl -X POST "http://localhost:8000/api/design/complete_iteration" \
  -H "Content-Type: application/json" \
  -d '{
    "project_id": "uuid",
    "project_name": "FIR_Design",
    "project_type": "fir",
    "iteration": {
      "project_id": "uuid",
      "approach_description": "Loop merge optimization",
      "code_snapshot": "void fir() {...}",
      "pragmas_used": ["#pragma HLS PIPELINE"],
      "user_reference_code": null,
      "user_specification": "II=1"
    },
    "synthesis_result": {
      "ii_achieved": 128,
      "ii_target": 1,
      "latency_cycles": 134,
      "timing_met": true,
      "resource_usage": {"DSP": 1, "LUT": 405, "FF": 295, "BRAM": 0}
    },
    "rules_applied": [...]
  }'
```

**Cursorä¼šè‡ªåŠ¨è°ƒç”¨æ­¤API**ï¼ˆç»¼åˆæˆåŠŸåŽï¼‰

---

## å¸¸è§é—®é¢˜

### Q1: æˆ‘éœ€è¦æ˜Žç¡®è¯´"è¿™æ˜¯å‚è€ƒä»£ç "å—ï¼Ÿ

**ç­”**: ä¸éœ€è¦ï¼Cursorä¼šè‡ªåŠ¨è¯†åˆ«ã€‚

æ”¯æŒçš„è‡ªç„¶æè¿°è¯ï¼š
- "è¿™æ˜¯èŒƒä¾‹", "åƒè€ƒç¨‹å¼", "baselineå®žçŽ°"
- "ç¤ºä¾‹ä»£ç ", "example code", "reference"

å…±æ”¯æŒ**44ä¸ªè‡ªç„¶å…³é”®å­—**ã€‚è¯¦è§: `HLS_Knowledge_Base-Cursorrules.md` â†’ è‡ªåŠ¨è¯†åˆ«åŠŸèƒ½

### Q2: æˆ‘éœ€è¦è¯´"è¯·è®°å½•åˆ°çŸ¥è¯†åº“"å—ï¼Ÿ

**ç­”**: ä¸éœ€è¦ï¼HLSç»¼åˆæˆåŠŸåŽè‡ªåŠ¨è®°å½•ã€‚

Cursorä¼šè‡ªåŠ¨ï¼š
- è§£æžç»¼åˆæŠ¥å‘Š
- è°ƒç”¨APIè®°å½•
- æ›´æ–°è§„åˆ™æ•ˆæžœ
- æ›´æ–°æœ¬åœ°æ–‡æ¡£

### Q3: ç»¼åˆå¤±è´¥ä¼šè®°å½•å—ï¼Ÿ

**ç­”**: ä¸ä¼šã€‚ç»¼åˆå¤±è´¥æ²¡æœ‰æ€§èƒ½æ•°æ®ï¼Œè®°å½•æ— æ„ä¹‰ã€‚

### Q4: æ•°æ®åº“å¯†ç å®‰å…¨å—ï¼Ÿ

**ç­”**: æ˜¯çš„ï¼å¯†ç åœ¨æœåŠ¡å™¨ç«¯ï¼ˆ`main.py`ï¼‰ï¼Œä¸æš´éœ²åœ¨`.cursorrules`ä¸­ã€‚

### Q5: å¦‚ä½•é‡ç½®æ•°æ®åº“ï¼Ÿ

**ç­”**: ä½¿ç”¨ `reset_database.py`

```bash
cd /home/$USER/hls-knowledge-base
python3 reset_database.py --stats  # æŸ¥çœ‹ç»Ÿè®¡
python3 reset_database.py          # æ‰§è¡Œé‡ç½®ï¼ˆéœ€ç¡®è®¤ï¼‰
python3 import_hls_rules.py        # é‡æ–°å¯¼å…¥è§„åˆ™
```

è¯¦è§æœ¬æ–‡æ¡£ â†’ "å®Œæ•´é‡æ–°åˆå§‹åŒ–æµç¨‹"

### Q6: FIRç¤ºä¾‹æ•°æ®å¿…é¡»å¯¼å…¥å—ï¼Ÿ

**ç­”**: ä¸å¿…é¡»ã€‚`import_fir128_data.py` æ˜¯å¯é€‰çš„ã€‚

- **éœ€è¦å¯¼å…¥**: æƒ³æµ‹è¯•APIæŸ¥è¯¢åŠŸèƒ½ï¼Œå­¦ä¹ æ•°æ®ç»“æž„
- **ä¸éœ€è¦å¯¼å…¥**: ä½ çš„å®žé™…è®¾è®¡ä¼šè‡ªåŠ¨è®°å½•

### Q7: å¦‚ä½•æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ–‡ä»¶ï¼Ÿ

**ç­”**: å‚è€ƒæœ¬æ–‡æ¡£ â†’ "æ–‡ä»¶ç”¨é€”ä¸€è§ˆè¡¨"

---

## ä¸‹ä¸€æ­¥

## ðŸ”„ å®Œæ•´é‡æ–°åˆå§‹åŒ–æµç¨‹

å¦‚éœ€å®Œå…¨é‡ç½®çŸ¥è¯†åº“ç³»ç»Ÿï¼ˆåŒ…æ‹¬ Schema å’Œæ•°æ®ï¼‰ï¼Œæœ‰ä¸‰ç§æ–¹æ³•ï¼š

---

### æ–¹æ³• 1: ä¸€é”®è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæœ€æŽ¨èï¼‰âœ¨

**ä½¿ç”¨åœºæ™¯**: 
- æƒ³è¦å®Œå…¨é‡ç½®ç³»ç»Ÿå¹¶è‡ªåŠ¨å¯¼å…¥æ‰€æœ‰æ•°æ®
- ç¡®ä¿ Schema æ­£ç¡®ï¼ˆåŒ…å« `rule_code` å’Œ `rule_type` å­—æ®µï¼‰
- èŠ‚çœæ—¶é—´ï¼Œè‡ªåŠ¨åŒ–æ‰€æœ‰æ­¥éª¤

**æ‰§è¡Œæ­¥éª¤**:

```bash
cd /home/$USER/hls-knowledge-base

# è¿è¡Œä¸€é”®é‡æ–°åˆå§‹åŒ–è„šæœ¬
./reinit.sh
```

**è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆ**:
1. âœ“ åœæ­¢å¹¶ç§»é™¤å®¹å™¨å’Œ volume
2. âœ“ é‡æ–°å¯åŠ¨ï¼ˆå¼ºåˆ¶æ‰§è¡Œ `init.sql`ï¼‰
3. âœ“ éªŒè¯ Schema æ­£ç¡®æ€§
4. âœ“ ç­‰å¾… PostgreSQL å°±ç»ª
5. âœ“ é‡å¯ API ç¡®ä¿è¿žæŽ¥
6. âœ“ å¯¼å…¥ 287 æ¡å®˜æ–¹è§„åˆ™ï¼ˆR###ï¼‰
7. âœ“ å¯¼å…¥ 15 æ¡ç”¨æˆ·æç¤ºï¼ˆP###ï¼‰
8. âœ“ å®Œæ•´éªŒè¯å’Œç»Ÿè®¡æŠ¥å‘Š

**é¢„æœŸè¾“å‡º**:
```
============================================================
âœ“ é‡æ–°åˆå§‹åŒ–å®Œæˆï¼ç³»ç»Ÿè¿ä½œæ­£å¸¸
============================================================

æ•°æ®åº“ç»Ÿè®¡ï¼š
  å®˜æ–¹è§„åˆ™ (official):    287
  ç”¨æˆ·æç¤º (user_prompt): 15
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  æ€»è®¡:                   302

ä¸‹ä¸€æ­¥ï¼š
  1. è®¿é—® API: curl http://localhost:8000/health
  2. æŸ¥çœ‹è§„åˆ™: curl 'http://localhost:8000/api/rules/effective?min_success_rate=0&limit=5'
  3. (å¯é€‰) å¯¼å…¥èŒƒä¾‹é¡¹ç›®: python3 import_fir128_data.py
```

**ä¼˜ç‚¹**:
- âš¡ å…¨è‡ªåŠ¨ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥å¤šä¸ªå‘½ä»¤
- ðŸŽ¨ å½©è‰²è¾“å‡ºï¼Œæ¸…æ™°æ˜¾ç¤ºè¿›åº¦
- âœ… å®Œæ•´éªŒè¯ï¼Œç¡®ä¿æ¯ä¸ªæ­¥éª¤æˆåŠŸ
- ðŸ“Š æœ€ç»ˆç»Ÿè®¡æŠ¥å‘Šï¼Œä¸€ç›®äº†ç„¶

**æ³¨æ„**: æ­¤æ–¹æ³•ä¼šå®Œå…¨åˆ é™¤çŽ°æœ‰æ•°æ®ï¼ˆä¸å¯æ¢å¤ï¼‰

---

### æ–¹æ³• 2: æ‰‹åŠ¨å®Œå…¨é‡å»ºï¼ˆå½»åº•æ¸…ç†ï¼‰

**ä½¿ç”¨åœºæ™¯**: 
- Schema ç‰ˆæœ¬è¿‡æ—§ï¼ˆç¼ºå°‘ `rule_code` æˆ– `rule_type` å­—æ®µï¼‰
- éœ€è¦å¼ºåˆ¶é‡æ–°æ‰§è¡Œ `init.sql`
- Docker volume å‡ºçŽ°é—®é¢˜

**æ‰§è¡Œæ­¥éª¤**:

```bash
cd /home/$USER/hls-knowledge-base

# æ­¥éª¤ 1: åœæ­¢å¹¶åˆ é™¤æ‰€æœ‰å®¹å™¨å’Œ volumeï¼ˆé‡è¦ï¼ï¼‰
docker-compose down -v

# æ­¥éª¤ 2: ç¡®è®¤ volume å·²åˆ é™¤
docker volume ls | grep hls

# æ­¥éª¤ 3: é‡æ–°å¯åŠ¨ï¼ˆä¼šè‡ªåŠ¨æ‰§è¡Œ init.sqlï¼‰
docker-compose up -d

# æ­¥éª¤ 4: ç­‰å¾… PostgreSQL åˆå§‹åŒ–å®Œæˆ
sleep 10

# æ­¥éª¤ 5: æ£€æŸ¥ PostgreSQL æ˜¯å¦å°±ç»ª
docker logs hls_knowledge_db --tail 5

# æ­¥éª¤ 6: é‡å¯ APIï¼ˆç¡®ä¿è¿žæŽ¥ï¼‰
docker restart hls_kb_api
sleep 3

# æ­¥éª¤ 7: éªŒè¯ API å¥åº·çŠ¶æ€
curl http://localhost:8000/health

# æ­¥éª¤ 8: éªŒè¯ Schemaï¼ˆç¡®è®¤ rule_code å’Œ rule_type å­˜åœ¨ï¼‰
docker exec hls_knowledge_db psql -U hls_user -d hls_knowledge -c "\d hls_rules"

# æ­¥éª¤ 9: å¯¼å…¥å®˜æ–¹è§„åˆ™ï¼ˆ287 æ¡ï¼‰
python3 import_hls_rules.py

# æ­¥éª¤ 10: å¯¼å…¥ç”¨æˆ·æç¤ºï¼ˆ15 æ¡ï¼‰
python3 import_user_prompts.py

# æ­¥éª¤ 11: (å¯é€‰) å¯¼å…¥ FIR128 ç¤ºä¾‹æ•°æ®
python3 import_fir128_data.py

# æ­¥éª¤ 12: éªŒè¯å¯¼å…¥ç»“æžœ
curl -s 'http://localhost:8000/api/rules/effective?min_success_rate=0&limit=5' | jq '.rules | length'
```

**éªŒè¯ Schema çš„é¢„æœŸè¾“å‡º**:
```
 Column      | Type                        | ...
-------------+-----------------------------+-----
 id          | uuid                        | ...
 rule_code   | character varying(10)       | ...  âœ“ å¿…é¡»å­˜åœ¨
 rule_type   | character varying(20)       | ...  âœ“ å¿…é¡»å­˜åœ¨
 rule_text   | text                        | ...
 category    | character varying(50)       | ...
 priority    | integer                     | ...
 ...
```

**å…³é”®ç‚¹**: 
- âš ï¸ **å¿…é¡»ä½¿ç”¨ `-v` å‚æ•°**ï¼š`docker-compose down -v` ä¼šåˆ é™¤ volume
- ðŸ”„ åªæœ‰åˆ é™¤ volume æ‰ä¼šé‡æ–°æ‰§è¡Œ `init.sql`
- âœ… è¿™æ˜¯å”¯ä¸€èƒ½æ›´æ–° Schema çš„æ–¹æ³•ï¼ˆå¦‚æžœ Schema ç‰ˆæœ¬è¿‡æ—§ï¼‰

**ä¼˜ç‚¹**:
- ðŸ”§ å®Œå…¨æŽ§åˆ¶æ¯ä¸ªæ­¥éª¤
- ðŸ” å¯ä»¥åœ¨æ¯æ­¥éªŒè¯ç»“æžœ
- ðŸ“š é€‚åˆå­¦ä¹ ç³»ç»Ÿæž¶æž„

**ç¼ºç‚¹**:
- â±ï¸ éœ€è¦æ‰‹åŠ¨è¾“å…¥å¤šä¸ªå‘½ä»¤
- ðŸ§ éœ€è¦ç†è§£æ¯ä¸ªæ­¥éª¤çš„ç›®çš„

---

### æ–¹æ³• 3: ä»…æ¸…ç©ºæ•°æ®ï¼ˆä¿ç•™ Schemaï¼‰

**ä½¿ç”¨åœºæ™¯**: 
- Schema å·²ç»æ˜¯æœ€æ–°ç‰ˆæœ¬
- åªæƒ³æ¸…ç©ºæ•°æ®ï¼Œä¸æƒ³é‡å»ºå®¹å™¨
- å¿«é€Ÿé‡ç½®æµ‹è¯•æ•°æ®

**æ‰§è¡Œæ­¥éª¤**:

```bash
cd /home/$USER/hls-knowledge-base

# æ­¥éª¤ 1: æŸ¥çœ‹å½“å‰ç»Ÿè®¡
python3 reset_database.py --stats

# æ­¥éª¤ 2: æ‰§è¡Œé‡ç½®ï¼ˆä¼šè¦æ±‚ç¡®è®¤ï¼‰
python3 reset_database.py

# æ­¥éª¤ 3: é‡æ–°å¯¼å…¥å®˜æ–¹è§„åˆ™
python3 import_hls_rules.py

# æ­¥éª¤ 4: é‡æ–°å¯¼å…¥ç”¨æˆ·æç¤º
python3 import_user_prompts.py
```

**é¢„æœŸè¾“å‡º**:
```
å½“å‰æ•°æ®åº“ç»Ÿè®¡
  projects                     X æ¡è®°å½•
  hls_rules                  302 æ¡è®°å½•
  design_iterations            X æ¡è®°å½•
  synthesis_results            X æ¡è®°å½•
  rules_effectiveness          X æ¡è®°å½•

âš ï¸ è­¦å‘Š: æ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰æ•°æ®ï¼
ç¡®å®šè¦ç»§ç»­å—? (yes/no): yes

âœ“ æ•°æ®åº“å·²é‡ç½®ï¼

ä¸‹ä¸€æ­¥:
  1. è¿è¡Œ import_hls_rules.py å¯¼å…¥å®˜æ–¹è§„åˆ™
  2. è¿è¡Œ import_user_prompts.py å¯¼å…¥ç”¨æˆ·æç¤º
```

**ä¼˜ç‚¹**:
- âš¡ å¿«é€Ÿï¼Œä¸éœ€è¦é‡å¯ Docker
- ðŸ’¾ ä¿ç•™ Schema ç»“æž„
- ðŸŽ¯ ç²¾ç¡®æŽ§åˆ¶åˆ é™¤èŒƒå›´

**ç¼ºç‚¹**:
- âŒ æ— æ³•æ›´æ–° Schemaï¼ˆå¦‚æžœ Schema è¿‡æ—§åˆ™æ— æ•ˆï¼‰
- âš ï¸ éœ€è¦æ‰‹åŠ¨é‡æ–°å¯¼å…¥è§„åˆ™

---

### ä¸‰ç§æ–¹æ³•å¯¹æ¯”

| ç‰¹æ€§ | æ–¹æ³•1: è‡ªåŠ¨åŒ–è„šæœ¬ | æ–¹æ³•2: æ‰‹åŠ¨é‡å»º | æ–¹æ³•3: ä»…æ¸…ç©ºæ•°æ® |
|------|------------------|----------------|------------------|
| **æ‰§è¡Œæ—¶é—´** | ~60ç§’ | ~5åˆ†é’Ÿ | ~30ç§’ |
| **è‡ªåŠ¨åŒ–ç¨‹åº¦** | â­â­â­â­â­ å®Œå…¨è‡ªåŠ¨ | â­â­ éœ€æ‰‹åŠ¨è¾“å…¥ | â­â­â­ åŠè‡ªåŠ¨ |
| **æ›´æ–° Schema** | âœ… æ˜¯ | âœ… æ˜¯ | âŒ å¦ |
| **åˆ é™¤ Volume** | âœ… æ˜¯ | âœ… æ˜¯ | âŒ å¦ |
| **æ¸…ç©ºæ•°æ®** | âœ… æ˜¯ | âœ… æ˜¯ | âœ… æ˜¯ |
| **é‡å¯å®¹å™¨** | âœ… æ˜¯ | âœ… æ˜¯ | âŒ å¦ |
| **è‡ªåŠ¨å¯¼å…¥** | âœ… å®˜æ–¹+ç”¨æˆ· | âŒ éœ€æ‰‹åŠ¨ | âŒ éœ€æ‰‹åŠ¨ |
| **éªŒè¯æŠ¥å‘Š** | âœ… è¯¦ç»† | âŒ éœ€æ‰‹åŠ¨ | â­ ç®€å• |
| **é€‚ç”¨åœºæ™¯** | æ—¥å¸¸é‡ç½® | Schemaè¿‡æ—§ | å¿«é€Ÿæ¸…ç† |

---

### ðŸ“ ä½•æ—¶ä½¿ç”¨å“ªä¸ªæ–¹æ³•ï¼Ÿ

#### ä½¿ç”¨æ–¹æ³• 1ï¼ˆä¸€é”®è‡ªåŠ¨åŒ–ï¼‰å¦‚æžœï¼š
- âœ… ä½ æƒ³å¿«é€Ÿé‡ç½®ç³»ç»Ÿ
- âœ… ä½ æƒ³ç¡®ä¿ Schema æ˜¯æœ€æ–°çš„
- âœ… ä½ æƒ³èŠ‚çœæ—¶é—´
- âœ… ä½ æ˜¯ç¬¬ä¸€æ¬¡é‡æ–°åˆå§‹åŒ–

#### ä½¿ç”¨æ–¹æ³• 2ï¼ˆæ‰‹åŠ¨é‡å»ºï¼‰å¦‚æžœï¼š
- âœ… Schema ç‰ˆæœ¬è¿‡æ—§ï¼ˆç¼ºå°‘ `rule_code` æˆ– `rule_type`ï¼‰
- âœ… ä½ æƒ³å­¦ä¹ ç³»ç»Ÿæž¶æž„
- âœ… ä½ éœ€è¦åœ¨æ¯æ­¥è¿›è¡Œè°ƒè¯•
- âœ… è‡ªåŠ¨åŒ–è„šæœ¬æ— æ³•è¿è¡Œ

#### ä½¿ç”¨æ–¹æ³• 3ï¼ˆä»…æ¸…ç©ºæ•°æ®ï¼‰å¦‚æžœï¼š
- âœ… Schema å·²ç»æ˜¯æœ€æ–°ç‰ˆæœ¬
- âœ… ä½ åªæƒ³æ¸…ç©ºè®¾è®¡æ•°æ®
- âœ… ä½ ä¸æƒ³é‡å¯ Docker
- âœ… ä½ æƒ³ä¿ç•™å®¹å™¨çŠ¶æ€

---

### âš ï¸ é‡è¦æé†’

**é‡æ–°åˆå§‹åŒ–ä¼šåˆ é™¤çš„æ•°æ®**:
- âŒ æ‰€æœ‰è®¾è®¡è¿­ä»£è®°å½•ï¼ˆ`design_iterations`ï¼‰
- âŒ æ‰€æœ‰ç»¼åˆç»“æžœï¼ˆ`synthesis_results`ï¼‰
- âŒ æ‰€æœ‰è§„åˆ™æ•ˆæžœç»Ÿè®¡ï¼ˆ`rules_effectiveness`ï¼‰
- âŒ æ‰€æœ‰é¡¹ç›®è®°å½•ï¼ˆ`projects`ï¼‰
- âŒ æ‰€æœ‰ HLS è§„åˆ™ï¼ˆéœ€é‡æ–°å¯¼å…¥ï¼‰

**ä¸ä¼šå½±å“çš„å†…å®¹**:
- âœ… æºæ–‡ä»¶ï¼ˆ`ug1399_rules.txt`, `user_prompts.txt`ï¼‰
- âœ… Docker é•œåƒ
- âœ… é…ç½®æ–‡ä»¶ï¼ˆ`docker-compose.yml`, `init.sql`ï¼‰
- âœ… æ‚¨çš„ HLS é¡¹ç›®ä»£ç ï¼ˆåœ¨å…¶ä»–ç›®å½•ï¼‰

**å»ºè®®**:
1. åœ¨é‡æ–°åˆå§‹åŒ–å‰ï¼Œå¯¼å‡ºé‡è¦æ•°æ®ï¼ˆå¦‚æžœæœ‰ï¼‰
2. ç¡®è®¤ `init.sql` åŒ…å«æœ€æ–° Schema
3. ä¼˜å…ˆä½¿ç”¨æ–¹æ³• 1ï¼ˆè‡ªåŠ¨åŒ–è„šæœ¬ï¼‰
4. å¦‚æžœæ–¹æ³• 1 å¤±è´¥ï¼Œå†ä½¿ç”¨æ–¹æ³• 2

---

### ðŸ” éªŒè¯é‡æ–°åˆå§‹åŒ–æ˜¯å¦æˆåŠŸ

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```bash
# 1. æ£€æŸ¥ API å¥åº·çŠ¶æ€
curl http://localhost:8000/health
# é¢„æœŸ: {"status": "healthy", "database": "connected"}

# 2. æ£€æŸ¥è§„åˆ™æ€»æ•°
docker exec hls_knowledge_db psql -U hls_user -d hls_knowledge -c \
  "SELECT rule_type, COUNT(*) FROM hls_rules GROUP BY rule_type;"
# é¢„æœŸ: official (287), user_prompt (15)

# 3. éªŒè¯ Schema
docker exec hls_knowledge_db psql -U hls_user -d hls_knowledge -c "\d hls_rules"
# é¢„æœŸ: åŒ…å« rule_code å’Œ rule_type å­—æ®µ

# 4. æµ‹è¯• API æŸ¥è¯¢
curl -s 'http://localhost:8000/api/rules/effective?min_success_rate=0&limit=1' | jq .
# é¢„æœŸ: è¿”å›žè§„åˆ™æ•°æ®ï¼ˆJSON æ ¼å¼ï¼‰
```

å¦‚æžœä»¥ä¸Šå››é¡¹éƒ½é€šè¿‡ï¼Œé‡æ–°åˆå§‹åŒ–æˆåŠŸï¼ âœ…

---

## å¸¸è§æ“ä½œ

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹å®¹å™¨
docker ps | grep hls_

# æŸ¥çœ‹APIæ—¥å¿—
docker logs hls_kb_api --tail 50

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker logs hls_knowledge_db --tail 50
```

### æ•°æ®åº“ç»Ÿè®¡

```bash
cd /home/$USER/hls-knowledge-base
python3 reset_database.py --stats
```

**è¾“å‡ºç¤ºä¾‹**:
```
å½“å‰èµ„æ–™åº“ç»Ÿè®¡
  projects                     5 æ¡è®°å½•
  hls_rules                  287 æ¡è®°å½•
  design_iterations           12 æ¡è®°å½•
  synthesis_results           12 æ¡è®°å½•
  rules_effectiveness          8 æ¡è®°å½•
```

---

## ä¸‹ä¸€æ­¥

### æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£

- **Cursorrulesè¯¦è§£**: `HLS_Knowledge_Base-Cursorrules.md`
- **ç³»ç»Ÿæž¶æž„**: `HLS_Knowledge_Base-SystemArch.md`
- **æ•°æ®åº“ç®¡ç†**: `HLS_Knowledge_Base-ManageDB.md`

### å¼€å§‹ç¬¬ä¸€ä¸ªè®¾è®¡

åœ¨Cursorä¸­è¾“å…¥ï¼š
```
è¿™æ˜¯æˆ‘çš„FIR baselineä»£ç : void fir() {...}
è¯·ä¼˜åŒ–åˆ°II=1
```

Cursorä¼šè‡ªåŠ¨å¤„ç†ä¸€åˆ‡ï¼

---

**çŽ°åœ¨å¼€å§‹ä½¿ç”¨ï¼Œè®©æ¯æ¬¡HLSè®¾è®¡éƒ½æˆä¸ºä¸‹æ¬¡çš„ç»éªŒï¼** ðŸš€

